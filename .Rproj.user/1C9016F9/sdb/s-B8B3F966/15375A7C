{
    "collab_server" : "",
    "contents" : "\n# IDEA: Get all mean percentages from each kommun\n#' An RC class that manages all the data - - -\n#'@export elect_viz\n#'@export\nelect_viz <- setRefClass(\n  \"elect_viz\",\n  fields = list(\n    muniplicity = \"character\",\n    muni_list = \"character\",\n    data = \"data.frame\",\n    mean_p_vals = \"vector\"\n  ),\n  methods = list(\n    initialize = function(data) {\n      # Gets the list of possible muniplicities, removes unused indices\n      data <<- data[-1,] # To remove NA's we omit row 1\n      muni_list <<- unique(data$X__4[c(-1,-2)])\n      muniplicity <<- muni_list[1]\n    },\n    get_muniplicites = function() {\n      return(muni_list)\n    },\n    set_muniplicity = function(val) {\n      muniplicity <<- val\n    },\n    get_muniplicity = function() {\n      \"Returns the current muniplicity\"\n      return(muniplicity)\n    },\n    get_mean_p_vals = function() {\n      \"Returns the mean p-values for the currently selected muniplicity\"\n      options(warn=-1) # To suppress warnings\n      mean_p_vals <<- lapply(seq(9,27,by=2), function(x) {\n        val <-\n          as.numeric(\n            data[[paste(\"X__\", as.character(x), sep=\"\")]]\n          )\n        mean(val[data$X__4 == muniplicity])\n      })\n\n      names(mean_p_vals) <<- unlist(lapply(seq(9,27,by=2), function(x) {\n        namestr <- strsplit(sheet[[paste(\"X__\", as.character(x), sep=\"\")]][2], \" \")\n        namestr[[1]][1]\n      }))\n\n      mean_p_vals <<- unlist(mean_p_vals)\n      options(warn=0)\n      return(mean_p_vals)\n    }\n  )\n)\n\nX <- elect_viz$new(data = sheet)\nbarplot(X$get_mean_p_vals(), main=X$get_muniplicity())\nX$get_mean_p_vals()\nX$set_muniplicity(\"Norrbottens län\")\nbarplot(X$get_mean_p_vals(), main=X$get_muniplicity())\nX$get_mean_p_vals()\nX$set_muniplicity(\"Uppsala län\")\nbarplot(X$get_mean_p_vals(), main=X$get_muniplicity())\nX$get_mean_p_vals()\n\n",
    "created" : 1506609024761.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2516263566",
    "id" : "15375A7C",
    "lastKnownWriteTime" : 1506609230,
    "last_content_update" : 1506609230252,
    "path" : "~/lab5/R/elect_viz.R",
    "project_path" : "R/elect_viz.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}